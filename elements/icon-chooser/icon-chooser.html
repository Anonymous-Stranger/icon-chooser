
<link rel="import" href="../../bower_components/polymer/polymer.html"/>

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html"/>
<link rel="import" href="../../bower_components/iron-image/iron-image.html"/>

<link rel="import" href="../../bower_components/file-upload/file-upload.html"/>

<link rel="import" href="../file-reader/file-reader.html"/>

<dom-module id="icon-chooser">
  
  <template>
    
    <style>
      
      .ic-icon {
        margin: 0.5rem;
      }

      .ic-icon.xs {
        height: 16px;
      }

      .ic-icon.sm {
        height: 32px;
      }

      .ic-icon.md {
        height: 64px;
      }

      .ic-icon.lg {
        height: 128px;
      }

      .ic-icon.xl {
        height: 256px;
      }

    </style>

    <template is="dom-if" if="[[!icons.length]]">

      <div class="fit layout vertical center-center">

        <file-upload id="iconFileChooser" files="{{icons}}" multi manual-upload progress-hidden raised>Select Icons</file-upload>

      </div>

    </template>

    <template is="dom-if" if="[[icons.length]]">
      <template is="dom-repeat" items="[[icons]]" as="iconFile">
        <file-reader file="[[iconFile]]" read-as="dataurl" result="{{iconFile.src}}"></file-reader>
        <img src="{{iconFile.src}}" sizing="contain" class="ic-icon xs"/>
        <img src="{{iconFile.src}}" sizing="contain" class="ic-icon sm"/>
        <img src="{{iconFile.src}}" sizing="contain" class="ic-icon md"/> 
        <img src="{{iconFile.src}}" sizing="contain" class="ic-icon lg"/>
        <img src="{{iconFile.src}}" sizing="contain" class="ic-icon xl"/>
      </template>
    </template>

  </template>

  <script>

    Polymer({
      
      is: 'icon-chooser',

      properties: {
        'iconFiles': {
          // an array of File objects, each representing an icon.
          type: Array,
          value: []
        },
        'icons': {
          type: Array,
          value: []
          // computed: '_loadIconsFromFiles(iconFiles.length)'
        }
      },

      _loadIconsFromFiles: function () {
        /* Computes icons based on iconFiles. */

        var jobName = 'loadIconsFromFiles';
        if (this.isDebouncerActive(jobName)) return;

        this.debounce(jobName, function(){

          for (var i = 0; i != this.iconFiles.length; ++i) {
            
          }
        
        }, 250);

        return this.icons ? this.icons : [];
      }

    });

  </script>

</dom-module>

